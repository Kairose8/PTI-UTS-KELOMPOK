<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Mahasiswa</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="topBar">
        <h1>Data Mahasiswa</h1>
    </div>

    <hr>

    <div id="secondBar">
        <h2>안녕하세요, ౨ৎ ⋆ ｡˚</h2>
    </div>

    <hr>

    <div>
        <p>"Hiduplah seolah engkau mati besok. Belajarlah seolah engkau hidup selamanya." ‧˚₊⋅(Mahatma Gandhi)⋅₊˚‧</p>
    </div>

    <hr>

        <p> <span id="tanggalwaktu"></span></p>
    <script>
        var dt = new Date();
        document.getElementById("tanggalwaktu").innerHTML = dt.toLocaleTimeString();
    </script>

    <table id="data-table">
        <thead>
            <tr>
                <th>NIM</th>
                <th>Nama Lengkap</th>
                <th>Alamat</th>
                <th>Pengaturan</th>
            </tr>
        </thead>
        <tbody id="table-body">
        </tbody>
    </table>

    <div class="add-data-container">
        <h2>Tambah Data Mahasiswa</h2>
        <form id="add-data-form">
            <label for="nim">NIM:</label>
            <input type="text" id="nim" name="nim" required>
            <span class="error-message" id="nim-error"></span>
            <br>
            <label for="nama">Nama Lengkap:</label>
            <input type="text" id="nama" name="nama" required>
            <span class="error-message" id="nama-error"></span>
            <br>
            <label for="alamat">Alamat:</label>
            <input type="text" id="alamat" name="alamat" required>
            <span class="error-message" id="alamat-error"></span>
            <br>
            <button type="submit" id="submit-button">Tambah Data</button>
            <br>
        </form>
    </div>

    <script>
        document.getElementById('add-data-form').addEventListener('submit', function(event) {
            event.preventDefault(); 
    
            var nim = document.getElementById('nim').value;
            var nama = document.getElementById('nama').value;
            var alamat = document.getElementById('alamat').value;
    
            if (!nim || !nama || !alamat) {
                if (!nim) document.getElementById('nim-error').textContent = 'NIM is required';
                if (!nama) document.getElementById('nama-error').textContent = 'Nama is required';
                if (!alamat) document.getElementById('alamat-error').textContent = 'Alamat is required';
                return;
            } else {
                document.getElementById('nim-error').textContent = '';
                document.getElementById('nama-error').textContent = '';
                document.getElementById('alamat-error').textContent = '';
            }
    
            if(document.getElementById('submit-button').innerText === "Tambah Data") {
                insertRow(nim, nama, alamat);
            } else {
                updateRow(nim, nama, alamat);
            }
    
            resetForm();
        });
    
        function insertRow(nim, nama, alamat) {
            var table = document.getElementById("table-body");
            var row = table.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
    
            cell1.innerHTML = nim;
            cell2.innerHTML = nama;
            cell3.innerHTML = alamat;
            cell4.innerHTML = '<button onclick="editRow(this)">Edit</button> <button onclick="deleteRow(this)">Delete</button>';
        }
    
        var rowToEdit = null;
    
        function editRow(btn) {
            rowToEdit = btn.parentNode.parentNode;
            document.getElementById('nim').value = rowToEdit.cells[0].innerHTML;
            document.getElementById('nama').value = rowToEdit.cells[1].innerHTML;
            document.getElementById('alamat').value = rowToEdit.cells[2].innerHTML;
    
            document.getElementById('submit-button').innerText = "Update Data";
        }
    
        function updateRow(nim, nama, alamat) {
            rowToEdit.cells[0].innerHTML = nim;
            rowToEdit.cells[1].innerHTML = nama;
            rowToEdit.cells[2].innerHTML = alamat;
        }
    
        function deleteRow(btn) {
            var row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }
    
        function resetForm() {
            document.getElementById('nim').value = '';
            document.getElementById('nama').value = '';
            document.getElementById('alamat').value = '';
            document.getElementById('submit-button').innerText = "Tambah Data";
            rowToEdit = null;
        }
    </script>
</body>
</html>